/*! 
 Build based on gin-vue-admin 
 Time : 1682153148000 */
import{s as e,r as a,aB as l,o as t,c as o,d as r,e as i,w as s,h as d,a4 as u,K as p,a1 as n,j as c,b as m,E as f,aw as v}from"./index.478f69c8.js";import{E as g}from"./pagination.59255531.js";/* empty css              */import"./tag.1631cc59.js";import"./select.fda82e69.js";import"./scrollbar.f3b871cb.js";/* empty css               */import{E as b,a as y}from"./table-column.00239d86.js";import"./checkbox.b4fadd3f.js";/* empty css                *//* empty css             */import{E as h}from"./popover.b242bf83.js";import{E as w,a as j}from"./form-item.d7718ef0.js";/* empty css               */import{f as _}from"./format.ae7f7ec8.js";import{E as k}from"./index.8616cb26.js";import"./isEqual.6e065d44.js";import"./_Uint8Array.c02ad389.js";import"./index.180d1878.js";import"./strings.1b82e4b7.js";import"./_initCloneObject.bd6ed324.js";import"./dropdown.9cfaeb35.js";import"./date.23f5a973.js";import"./dictionary.e5942c3d.js";import"./sysDictionary.47c33a0c.js";const C={class:"gva-search-box"},V={class:"gva-table-box"},x={class:"gva-btn-list"},O=r("p",null,"确定要删除吗？",-1),S={style:{"text-align":"right","margin-top":"8px"}},E={class:"popover-box"},z={key:1},R={class:"popover-box"},U={key:1},I=r("p",null,"确定要删除吗？",-1),D={style:{"text-align":"right","margin-top":"8px"}},N={class:"gva-pagination"},A={name:"SysOperationRecord"},B=Object.assign(A,{setup(A){const B=a(1),q=a(0),J=a(10),K=a([]),L=a({}),P=()=>{L.value={}},T=()=>{B.value=1,J.value=10,""===L.value.status&&(L.value.status=null),H()},F=e=>{J.value=e,H()},G=e=>{B.value=e,H()},H=async()=>{const a=await(l={page:B.value,pageSize:J.value,...L.value},e({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:l}));var l;0===a.code&&(K.value=a.data.list,q.value=a.data.total,B.value=a.data.page,J.value=a.data.pageSize)};H();const M=a(!1),Q=a([]),W=e=>{Q.value=e},X=async()=>{const a=[];Q.value&&Q.value.forEach((e=>{a.push(e.ID)}));var l;0===(await(l={ids:a},e({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:l}))).code&&(c({type:"success",message:"删除成功"}),K.value.length===a.length&&B.value>1&&B.value--,M.value=!1,H())},Y=async a=>{a.visible=!1;var l;0===(await(l={ID:a.ID},e({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:l}))).code&&(c({type:"success",message:"删除成功"}),1===K.value.length&&B.value>1&&B.value--,H())},Z=e=>{try{return JSON.parse(e)}catch(a){return e}};return(e,a)=>{const c=m,A=w,H=f,$=j,ee=h,ae=b,le=k,te=l("warning"),oe=v,re=y,ie=g;return t(),o("div",null,[r("div",C,[i($,{inline:!0,model:L.value},{default:s((()=>[i(A,{label:"请求方法"},{default:s((()=>[i(c,{modelValue:L.value.method,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(A,{label:"请求路径"},{default:s((()=>[i(c,{modelValue:L.value.path,"onUpdate:modelValue":a[1]||(a[1]=e=>L.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(A,{label:"结果状态码"},{default:s((()=>[i(c,{modelValue:L.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>L.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(A,null,{default:s((()=>[i(H,{type:"primary",icon:"search",onClick:T},{default:s((()=>[d("查询")])),_:1}),i(H,{icon:"refresh",onClick:P},{default:s((()=>[d("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),r("div",V,[r("div",x,[i(ee,{modelValue:M.value,"onUpdate:modelValue":a[5]||(a[5]=e=>M.value=e),placement:"top",width:"160"},{reference:s((()=>[i(H,{icon:"delete",style:{"margin-left":"10px"},disabled:!Q.value.length,onClick:a[4]||(a[4]=e=>M.value=!0)},{default:s((()=>[d("删除")])),_:1},8,["disabled"])])),default:s((()=>[O,r("div",S,[i(H,{type:"primary",link:"",onClick:a[3]||(a[3]=e=>M.value=!1)},{default:s((()=>[d("取消")])),_:1}),i(H,{type:"primary",onClick:X},{default:s((()=>[d("确定")])),_:1})])])),_:1},8,["modelValue"])]),i(re,{ref:"multipleTable",data:K.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:W},{default:s((()=>[i(ae,{align:"left",type:"selection",width:"55"}),i(ae,{align:"left",label:"操作人",width:"140"},{default:s((e=>[r("div",null,u(e.row.user.userName)+"("+u(e.row.user.nickName)+")",1)])),_:1}),i(ae,{align:"left",label:"日期",width:"180"},{default:s((e=>[d(u(p(_)(e.row.CreatedAt)),1)])),_:1}),i(ae,{align:"left",label:"状态码",prop:"status",width:"120"},{default:s((e=>[r("div",null,[i(le,{type:"success"},{default:s((()=>[d(u(e.row.status),1)])),_:2},1024)])])),_:1}),i(ae,{align:"left",label:"请求IP",prop:"ip",width:"120"}),i(ae,{align:"left",label:"请求方法",prop:"method",width:"120"}),i(ae,{align:"left",label:"请求路径",prop:"path",width:"240"}),i(ae,{align:"left",label:"请求",prop:"path",width:"80"},{default:s((e=>[r("div",null,[e.row.body?(t(),n(ee,{key:0,placement:"left-start",trigger:"click"},{reference:s((()=>[i(oe,{style:{cursor:"pointer"}},{default:s((()=>[i(te)])),_:1})])),default:s((()=>[r("div",E,[r("pre",null,u(Z(e.row.body)),1)])])),_:2},1024)):(t(),o("span",z,"无"))])])),_:1}),i(ae,{align:"left",label:"响应",prop:"path",width:"80"},{default:s((e=>[r("div",null,[e.row.resp?(t(),n(ee,{key:0,placement:"left-start",trigger:"click"},{reference:s((()=>[i(oe,{style:{cursor:"pointer"}},{default:s((()=>[i(te)])),_:1})])),default:s((()=>[r("div",R,[r("pre",null,u(Z(e.row.resp)),1)])])),_:2},1024)):(t(),o("span",U,"无"))])])),_:1}),i(ae,{align:"left",label:"按钮组"},{default:s((e=>[i(ee,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:s((()=>[i(H,{icon:"delete",type:"primary",link:"",onClick:a=>e.row.visible=!0},{default:s((()=>[d("删除")])),_:2},1032,["onClick"])])),default:s((()=>[I,r("div",D,[i(H,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:s((()=>[d("取消")])),_:2},1032,["onClick"]),i(H,{type:"primary",onClick:a=>Y(e.row)},{default:s((()=>[d("确定")])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),r("div",N,[i(ie,{"current-page":B.value,"page-size":J.value,"page-sizes":[10,30,50,100],total:q.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:G,onSizeChange:F},null,8,["current-page","page-size","total"])])])])}}});export{B as default};
