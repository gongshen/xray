/*! 
 Build based on gin-vue-admin 
 Time : 1682164992000 */
import{a as e,r as l,aB as a,o as t,c as o,d,e as u,w as i,h as n,a4 as p,a1 as r,a2 as m,f as s,cS as c,c1 as v,cT as f,j as h,cU as b,cV as y,cW as w,E as g,aw as V,b as _,bh as k,bi as I}from"./index.8a0793e1.js";import{E as j}from"./dialog.d4a37ffd.js";import"./overlay.351ed98d.js";import{E as x,a as D}from"./form-item.de0dc8a0.js";/* empty css                *//* empty css               */import{E as U}from"./radio.24fdcda5.js";/* empty css              */import"./tag.c2befb9d.js";import{E as C}from"./checkbox.37c5511a.js";import"./scrollbar.8938fee5.js";import{E as B,a as E}from"./select.a337fe0b.js";import{E as N,a as T}from"./table-column.1d311dab.js";/* empty css             *//* empty css               */import q from"./icon.add59535.js";import{W as A}from"./warningBar.4c9b676e.js";import{c as S}from"./authorityBtn.10efad25.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import{E as z}from"./index.5f729125.js";import"./refs.c3aa141e.js";import"./_Uint8Array.84fc61e2.js";import"./_initCloneObject.b12e814f.js";import"./rand.833b8507.js";import"./strings.2bcdca77.js";import"./isEqual.308df9cb.js";import"./arrays.378bf91a.js";import"./index.94ab2e27.js";const F=e=>(k("data-v-aa6e8bd8"),e=e(),I(),e),P={class:"gva-table-box"},O={class:"gva-btn-list"},W={key:0,class:"icon-column"},$={style:{display:"inline-flex","align-items":"center"}},H=F((()=>d("span",null,"路由Path",-1))),K=F((()=>d("span",{style:{"font-size":"12px","margin-right":"12px"}},"如果菜单包含子菜单，请创建router-view二级路由页面或者",-1))),Q=F((()=>d("span",null," 高亮菜单 ",-1))),G=F((()=>d("span",null," 是否为基础页面 ",-1))),J={class:"dialog-footer"},L={name:"Menus"},R=M(Object.assign(L,{setup(k){const I=e({path:[{required:!0,message:"请输入菜单name",trigger:"blur"}],component:[{required:!0,message:"请输入文件路径",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入菜单展示名称",trigger:"blur"}]}),M=l(1),F=l(0),L=l(999),R=l([]),X=l({}),Y=async()=>{const e=await c({page:M.value,pageSize:L.value,...X.value});0===e.code&&(R.value=e.data.list,F.value=e.data.total,M.value=e.data.page,L.value=e.data.pageSize)};Y();const Z=()=>{ee.value.component=ee.value.component.replace(/\\/g,"/")},ee=l({ID:0,path:"",name:"",hidden:!1,parentId:"",component:"",meta:{activeName:"",title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1},parameters:[],menuBtn:[]}),le=()=>{ee.value.path=ee.value.name},ae=e=>{de(),e()},te=l(null),oe=l(!1),de=()=>{oe.value=!1,te.value.resetFields(),ee.value={ID:0,path:"",name:"",hidden:!1,parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1}}},ue=l(!1),ie=()=>{de(),ue.value=!1},ne=async()=>{te.value.validate((async e=>{if(e){let e;e=se.value?await b(ee.value):await y(ee.value),0===e.code&&(h({type:"success",message:se.value?"编辑成功":"添加成功!"}),Y()),de(),ue.value=!1}}))},pe=l([{ID:"0",title:"根菜单"}]),re=()=>{pe.value=[{ID:"0",title:"根目录"}],me(R.value,pe.value,!1)},me=(e,l,a)=>{e&&e.forEach((e=>{if(e.children&&e.children.length){const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===ee.value.ID,children:[]};me(e.children,t.children,a||e.ID===ee.value.ID),l.push(t)}else{const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===ee.value.ID};l.push(t)}}))},se=l(!1),ce=l("新增菜单"),ve=e=>{ce.value="新增菜单",ee.value.parentId=String(e),se.value=!1,re(),ue.value=!0};return(e,l)=>{const c=g,b=N,y=V,k=T,F=_,L=x,X=C,de=B,me=E,fe=U,he=a("QuestionFilled"),be=z,ye=D,we=j;return t(),o("div",null,[d("div",P,[d("div",O,[u(c,{type:"primary",icon:"plus",onClick:l[0]||(l[0]=e=>ve("0"))},{default:i((()=>[n("新增根菜单")])),_:1})]),u(k,{data:R.value,"row-key":"ID"},{default:i((()=>[u(b,{align:"left",label:"ID","min-width":"100",prop:"ID"}),u(b,{align:"left",label:"展示名称","min-width":"120",prop:"authorityName"},{default:i((e=>[d("span",null,p(e.row.meta.title),1)])),_:1}),u(b,{align:"left",label:"图标","min-width":"140",prop:"authorityName"},{default:i((e=>[e.row.meta.icon?(t(),o("div",W,[u(y,null,{default:i((()=>[(t(),r(m(e.row.meta.icon)))])),_:2},1024),d("span",null,p(e.row.meta.icon),1)])):s("",!0)])),_:1}),u(b,{align:"left",label:"路由Name","show-overflow-tooltip":"","min-width":"160",prop:"name"}),u(b,{align:"left",label:"路由Path","show-overflow-tooltip":"","min-width":"160",prop:"path"}),u(b,{align:"left",label:"是否隐藏","min-width":"100",prop:"hidden"},{default:i((e=>[d("span",null,p(e.row.hidden?"隐藏":"显示"),1)])),_:1}),u(b,{align:"left",label:"父节点","min-width":"90",prop:"parentId"}),u(b,{align:"left",label:"排序","min-width":"70",prop:"sort"}),u(b,{align:"left",label:"文件路径","min-width":"360",prop:"component"}),u(b,{align:"left",fixed:"right",label:"操作",width:"300"},{default:i((e=>[u(c,{type:"primary",link:"",icon:"plus",onClick:l=>ve(e.row.ID)},{default:i((()=>[n("添加子菜单")])),_:2},1032,["onClick"]),u(c,{type:"primary",link:"",icon:"edit",onClick:l=>(async e=>{ce.value="编辑菜单";const l=await w({id:e});ee.value=l.data.menu,se.value=!0,re(),ue.value=!0})(e.row.ID)},{default:i((()=>[n("编辑")])),_:2},1032,["onClick"]),u(c,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row.ID,void v.confirm("此操作将永久删除所有角色下该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await f({ID:a})).code&&(h({type:"success",message:"删除成功!"}),1===R.value.length&&M.value>1&&M.value--,Y())})).catch((()=>{h({type:"info",message:"已取消删除"})}));var a}},{default:i((()=>[n("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),u(we,{modelValue:ue.value,"onUpdate:modelValue":l[16]||(l[16]=e=>ue.value=e),"before-close":ae,title:ce.value},{footer:i((()=>[d("div",J,[u(c,{onClick:ie},{default:i((()=>[n("取 消")])),_:1}),u(c,{type:"primary",onClick:ne},{default:i((()=>[n("确 定")])),_:1})])])),default:i((()=>[u(A,{title:"新增菜单，需要在角色管理内配置权限才可使用"}),ue.value?(t(),r(ye,{key:0,ref_key:"menuForm",ref:te,inline:!0,model:ee.value,rules:I,"label-position":"top","label-width":"85px"},{default:i((()=>[u(L,{label:"路由Name",prop:"path",style:{width:"30%"}},{default:i((()=>[u(F,{modelValue:ee.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>ee.value.name=e),autocomplete:"off",placeholder:"唯一英文字符串",onChange:le},null,8,["modelValue"])])),_:1}),u(L,{prop:"path",style:{width:"30%"}},{label:i((()=>[d("span",$,[H,u(X,{modelValue:oe.value,"onUpdate:modelValue":l[2]||(l[2]=e=>oe.value=e),style:{"margin-left":"12px",height:"auto"}},{default:i((()=>[n("添加参数")])),_:1},8,["modelValue"])])])),default:i((()=>[u(F,{modelValue:ee.value.path,"onUpdate:modelValue":l[3]||(l[3]=e=>ee.value.path=e),disabled:!oe.value,autocomplete:"off",placeholder:"建议只在后方拼接参数"},null,8,["modelValue","disabled"])])),_:1}),u(L,{label:"是否隐藏",style:{width:"30%"}},{default:i((()=>[u(me,{modelValue:ee.value.hidden,"onUpdate:modelValue":l[4]||(l[4]=e=>ee.value.hidden=e),placeholder:"是否在列表隐藏"},{default:i((()=>[u(de,{value:!1,label:"否"}),u(de,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),u(L,{label:"父节点ID",style:{width:"30%"}},{default:i((()=>[u(fe,{modelValue:ee.value.parentId,"onUpdate:modelValue":l[5]||(l[5]=e=>ee.value.parentId=e),style:{width:"100%"},disabled:!se.value,options:pe.value,props:{checkStrictly:!0,label:"title",value:"ID",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])])),_:1}),u(L,{label:"文件路径",prop:"component",style:{width:"60%"}},{default:i((()=>[u(F,{modelValue:ee.value.component,"onUpdate:modelValue":l[6]||(l[6]=e=>ee.value.component=e),autocomplete:"off",placeholder:"页面:view/xxx/xx.vue 插件:plugin/xx/xx.vue",onBlur:Z},null,8,["modelValue"]),K,u(c,{style:{"margin-top":"4px"},onClick:l[7]||(l[7]=e=>ee.value.component="view/routerHolder.vue")},{default:i((()=>[n("点我设置")])),_:1})])),_:1}),u(L,{label:"展示名称",prop:"meta.title",style:{width:"30%"}},{default:i((()=>[u(F,{modelValue:ee.value.meta.title,"onUpdate:modelValue":l[8]||(l[8]=e=>ee.value.meta.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),u(L,{label:"图标",prop:"meta.icon",style:{width:"30%"}},{default:i((()=>[u(q,{meta:ee.value.meta,style:{width:"100%"}},null,8,["meta"])])),_:1}),u(L,{label:"排序标记",prop:"sort",style:{width:"30%"}},{default:i((()=>[u(F,{modelValue:ee.value.sort,"onUpdate:modelValue":l[9]||(l[9]=e=>ee.value.sort=e),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])])),_:1}),u(L,{prop:"meta.activeName",style:{width:"30%"}},{label:i((()=>[d("div",null,[Q,u(be,{content:"注：当到达此路由时候，指定左侧菜单指定name会处于活跃状态（亮起），可为空，为空则为本路由Name。",placement:"top",effect:"light"},{default:i((()=>[u(y,null,{default:i((()=>[u(he)])),_:1})])),_:1})])])),default:i((()=>[u(F,{modelValue:ee.value.meta.activeName,"onUpdate:modelValue":l[10]||(l[10]=e=>ee.value.meta.activeName=e),placeholder:ee.value.name,autocomplete:"off"},null,8,["modelValue","placeholder"])])),_:1}),u(L,{label:"KeepAlive",prop:"meta.keepAlive",style:{width:"30%"}},{default:i((()=>[u(me,{modelValue:ee.value.meta.keepAlive,"onUpdate:modelValue":l[11]||(l[11]=e=>ee.value.meta.keepAlive=e),style:{width:"100%"},placeholder:"是否keepAlive缓存页面"},{default:i((()=>[u(de,{value:!1,label:"否"}),u(de,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),u(L,{label:"CloseTab",prop:"meta.closeTab",style:{width:"30%"}},{default:i((()=>[u(me,{modelValue:ee.value.meta.closeTab,"onUpdate:modelValue":l[12]||(l[12]=e=>ee.value.meta.closeTab=e),style:{width:"100%"},placeholder:"是否自动关闭tab"},{default:i((()=>[u(de,{value:!1,label:"否"}),u(de,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),u(L,{style:{width:"30%"}},{label:i((()=>[d("div",null,[G,u(be,{content:"此项选择为是，则不会展示左侧菜单以及顶部信息。",placement:"top",effect:"light"},{default:i((()=>[u(y,null,{default:i((()=>[u(he)])),_:1})])),_:1})])])),default:i((()=>[u(me,{modelValue:ee.value.meta.defaultMenu,"onUpdate:modelValue":l[13]||(l[13]=e=>ee.value.meta.defaultMenu=e),style:{width:"100%"},placeholder:"是否为基础页面"},{default:i((()=>[u(de,{value:!1,label:"否"}),u(de,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])):s("",!0),d("div",null,[u(c,{type:"primary",icon:"edit",onClick:l[14]||(l[14]=e=>{return(l=ee.value).parameters||(l.parameters=[]),void l.parameters.push({type:"query",key:"",value:""});var l})},{default:i((()=>[n("新增菜单参数")])),_:1}),u(k,{data:ee.value.parameters,style:{width:"100%","margin-top":"12px"}},{default:i((()=>[u(b,{align:"left",prop:"type",label:"参数类型",width:"180"},{default:i((e=>[u(me,{modelValue:e.row.type,"onUpdate:modelValue":l=>e.row.type=l,placeholder:"请选择"},{default:i((()=>[u(de,{key:"query",value:"query",label:"query"}),u(de,{key:"params",value:"params",label:"params"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),u(b,{align:"left",prop:"key",label:"参数key",width:"180"},{default:i((e=>[d("div",null,[u(F,{modelValue:e.row.key,"onUpdate:modelValue":l=>e.row.key=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),u(b,{align:"left",prop:"value",label:"参数值"},{default:i((e=>[d("div",null,[u(F,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),u(b,{align:"left"},{default:i((e=>[d("div",null,[u(c,{type:"danger",icon:"delete",onClick:l=>{return a=ee.value.parameters,t=e.$index,void a.splice(t,1);var a,t}},{default:i((()=>[n("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),u(c,{style:{"margin-top":"12px"},type:"primary",icon:"edit",onClick:l[15]||(l[15]=e=>{return(l=ee.value).menuBtn||(l.menuBtn=[]),void l.menuBtn.push({name:"",desc:""});var l})},{default:i((()=>[n("新增可控按钮")])),_:1}),u(k,{data:ee.value.menuBtn,style:{width:"100%","margin-top":"12px"}},{default:i((()=>[u(b,{align:"left",prop:"name",label:"按钮名称",width:"180"},{default:i((e=>[d("div",null,[u(F,{modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),u(b,{align:"left",prop:"name",label:"备注",width:"180"},{default:i((e=>[d("div",null,[u(F,{modelValue:e.row.desc,"onUpdate:modelValue":l=>e.row.desc=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),u(b,{align:"left"},{default:i((e=>[d("div",null,[u(c,{type:"danger",icon:"delete",onClick:l=>(async(e,l)=>{const a=e[l];if(0===a.ID)return void e.splice(l,1);0===(await S({id:a.ID})).code&&e.splice(l,1)})(ee.value.menuBtn,e.$index)},{default:i((()=>[n("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-aa6e8bd8"]]);export{R as default};
