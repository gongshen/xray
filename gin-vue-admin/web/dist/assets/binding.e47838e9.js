/*! 
 Build based on gin-vue-admin 
 Time : 1682153148000 */
import{s as a,a as e,r as t,o as l,c as r,d as s,e as i,w as o,h as d,aF as n,a4 as u,K as p,E as c}from"./index.478f69c8.js";import{E as m}from"./dialog.14f5147e.js";import"./overlay.6224a56d.js";import{E as v}from"./divider.cf89c30c.js";import{E as f}from"./pagination.59255531.js";/* empty css              */import"./tag.1631cc59.js";import"./select.fda82e69.js";import"./scrollbar.f3b871cb.js";/* empty css               */import{E as h,a as b}from"./table-column.00239d86.js";import"./checkbox.b4fadd3f.js";/* empty css                */import{E as g,a as j}from"./form-item.d7718ef0.js";/* empty css               */import{E as y}from"./date-picker.dadbc2d4.js";import{C as _,b as k}from"./clipboard.27e2b814.js";import{f as w}from"./format.ae7f7ec8.js";import"./refs.ecd25701.js";import"./isEqual.6e065d44.js";import"./_Uint8Array.c02ad389.js";import"./index.180d1878.js";import"./index.8616cb26.js";import"./strings.1b82e4b7.js";import"./_initCloneObject.bd6ed324.js";import"./arrays.378bf91a.js";import"./index.033a2998.js";import"./date.23f5a973.js";import"./dictionary.e5942c3d.js";import"./sysDictionary.47c33a0c.js";const x={class:"gva-search-box"},C={class:"gva-table-box"},V={class:"gva-pagination"},E=s("h2",null,"shadowrocket,qv2ray,v2rayXS",-1),S=["src"],z=s("h2",null,"v2rayN,v2rayNG,v2rayXS",-1),A=["src"],D={name:"Binding"},U=Object.assign(D,{setup(D){new _(".btn");const U=e({}),B=t(),I=t(1),K=t(0),L=t(10),N=t([]),R=t({}),q=t({share1:"",share1_link:"",share2:"",share2_link:""}),F=()=>{R.value={},T()},O=()=>{I.value=1,L.value=10,T()},X=a=>{L.value=a,T()},G=a=>{I.value=a,T()},T=async()=>{const e=await(t={page:I.value,pageSize:L.value,...R.value},a({url:"/v2ray/binding/getBindingList",method:"get",params:t}));var t;0===e.code&&(N.value=e.data.list,K.value=e.data.total,I.value=e.data.page,L.value=e.data.pageSize)};T();const H=t(!1),J=async e=>{const t=await(l={ID:e.ID},a({url:"/v2ray/binding/shareBinding",method:"get",params:l}));var l;0===t.code&&(console.log("aaa:",t.data.share1),q.value.share1_link=t.data.share1,q.value.share2_link=t.data.share2,k.toDataURL(t.data.share1).then((a=>{q.value.share1=a})),k.toDataURL(t.data.share2).then((a=>{q.value.share2=a})),H.value=!0)},M=()=>{H.value=!1};return(a,e)=>{const t=y,_=c,k=g,D=j,T=h,P=b,Q=f,W=v,Y=m;return l(),r("div",null,[s("div",x,[i(D,{inline:!0,model:R.value,class:"demo-form-inline",onKeyup:n(O,["enter"])},{default:o((()=>[i(k,{label:"创建时间"},{default:o((()=>[i(t,{modelValue:R.value.startCreatedAt,"onUpdate:modelValue":e[0]||(e[0]=a=>R.value.startCreatedAt=a),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),i(t,{modelValue:R.value.endCreatedAt,"onUpdate:modelValue":e[1]||(e[1]=a=>R.value.endCreatedAt=a),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"]),i(_,{type:"primary",icon:"search",onClick:O},{default:o((()=>[d("查询")])),_:1}),i(_,{icon:"refresh",onClick:F},{default:o((()=>[d("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),s("div",C,[i(P,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:N.value,"row-key":"ID",onSelectionChange:a.handleSelectionChange},{default:o((()=>[i(T,{type:"selection",width:"55"}),i(T,{align:"left",label:"用户名",width:"120"},{default:o((a=>[d(u(a.row.user.nickName),1)])),_:1}),i(T,{align:"left",label:"服务器ip",width:"140"},{default:o((a=>[d(u(a.row.server.ip),1)])),_:1}),i(T,{align:"left",label:"日期",width:"180"},{default:o((a=>[d(u(p(w)(a.row.CreatedAt)),1)])),_:1}),i(T,{align:"left",label:"按钮组"},{default:o((a=>[i(_,{type:"primary",link:"",icon:"share",class:"table-button",onClick:e=>J(a.row)},{default:o((()=>[d("分享")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),s("div",V,[i(Q,{layout:"total, sizes, prev, pager, next, jumper","current-page":I.value,"page-size":L.value,"page-sizes":[10,30,50,100],total:K.value,onCurrentChange:G,onSizeChange:X},null,8,["current-page","page-size","total"])])]),i(Y,{modelValue:H.value,"onUpdate:modelValue":e[2]||(e[2]=a=>H.value=a),"before-close":M,title:"弹窗操作"},{default:o((()=>[i(D,{model:q.value,"label-position":"right",ref_key:"elFormRef",ref:B,rules:U,"label-width":"80px"},{default:o((()=>[E,s("div",null,[s("img",{src:q.value.share1,alt:"二维码",style:{width:"300px",height:"300px"}},null,8,S)]),i(_,{class:"btn","data-clipboard-text":q.value.share1_link},{default:o((()=>[d("复制")])),_:1},8,["data-clipboard-text"]),i(W),z,s("div",null,[s("img",{src:q.value.share2,alt:"二维码",style:{width:"300px",height:"300px"}},null,8,A)]),i(_,{class:"btn","data-clipboard-text":q.value.share2_link},{default:o((()=>[d("复制")])),_:1},8,["data-clipboard-text"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{U as default};
