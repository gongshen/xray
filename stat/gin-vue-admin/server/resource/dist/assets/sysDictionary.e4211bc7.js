/*! 
 Build based on gin-vue-admin 
 Time : 1680873134000 */
import{u as e,r as a,o as l,c as t,e as o,d as s,w as u,h as i,a3 as r,J as d,j as p,b as n,E as c}from"./index.e22ca15e.js";import{E as m}from"./dialog.844a69bd.js";import"./overlay.b9869d98.js";/* empty css               */import{E as v}from"./pagination.1c71de03.js";/* empty css              */import"./tag.46cc5c34.js";import{E as f,a as b}from"./select.96194a5d.js";import"./scrollbar.efc86474.js";/* empty css               */import{E as y,a as g}from"./table-column.a83e6cf2.js";import"./checkbox.bea932b2.js";/* empty css                */import{E as _}from"./popover.16ea0d1a.js";import{E as j,a as w}from"./form-item.8c20599d.js";/* empty css               */import{g as h,f as V,d as k,c as C,u as x}from"./sysDictionary.2b495a7f.js";import{W as U}from"./warningBar.d352a93c.js";import{f as D,a as E}from"./format.c2d47975.js";import{E as z}from"./index.2e5d978d.js";import"./refs.e55ffb18.js";import"./isEqual.c0ca3f92.js";import"./_Uint8Array.ef0d212b.js";import"./index.21b03b03.js";import"./index.e347d1a7.js";import"./strings.36175d48.js";import"./_initCloneObject.671954bf.js";import"./dropdown.c097faf7.js";/* empty css             *//* empty css                                                                   */import"./_plugin-vue_export-helper.cdc0426e.js";import"./date.23f5a973.js";import"./dictionary.e3d9631e.js";const I={class:"gva-search-box"},q={class:"gva-table-box"},S={class:"gva-btn-list"},A=s("p",null,"确定要删除吗？",-1),B={style:{"text-align":"right","margin-top":"8px"}},O={class:"gva-pagination"},F={class:"dialog-footer"},J={name:"SysDictionary"},T=Object.assign(J,{setup(J){const T=e(),W=a({name:null,type:null,status:!0,desc:null}),G=a({name:[{required:!0,message:"请输入字典名（中）",trigger:"blur"}],type:[{required:!0,message:"请输入字典名（英）",trigger:"blur"}],desc:[{required:!0,message:"请输入描述",trigger:"blur"}]}),H=a(1),K=a(0),L=a(10),M=a([]),N=a({}),P=()=>{N.value={}},Q=()=>{H.value=1,L.value=10,""===N.value.status&&(N.value.status=null),Y()},R=e=>{L.value=e,Y()},X=e=>{H.value=e,Y()},Y=async()=>{const e=await h({page:H.value,pageSize:L.value,...N.value});0===e.code&&(M.value=e.data.list,K.value=e.data.total,H.value=e.data.page,L.value=e.data.pageSize)};Y();const Z=a(!1),$=a(""),ee=()=>{Z.value=!1,W.value={name:null,type:null,status:!0,desc:null}},ae=a(null),le=async()=>{ae.value.validate((async e=>{if(!e)return;let a;switch($.value){case"create":default:a=await C(W.value);break;case"update":a=await x(W.value)}0===a.code&&(p.success("操作成功"),ee(),Y())}))},te=()=>{$.value="create",Z.value=!0};return(e,a)=>{const h=n,C=j,x=f,J=b,oe=c,se=w,ue=y,ie=_,re=g,de=v,pe=z,ne=m;return l(),t("div",null,[o(U,{title:"获取字典且缓存方法已在前端utils/dictionary 已经封装完成 不必自己书写 使用方法查看文件内注释"}),s("div",I,[o(se,{inline:!0,model:N.value},{default:u((()=>[o(C,{label:"字典名（中）"},{default:u((()=>[o(h,{modelValue:N.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>N.value.name=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(C,{label:"字典名（英）"},{default:u((()=>[o(h,{modelValue:N.value.type,"onUpdate:modelValue":a[1]||(a[1]=e=>N.value.type=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(C,{label:"状态",prop:"status"},{default:u((()=>[o(J,{modelValue:N.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>N.value.status=e),clear:"",placeholder:"请选择"},{default:u((()=>[o(x,{key:"true",label:"是",value:"true"}),o(x,{key:"false",label:"否",value:"false"})])),_:1},8,["modelValue"])])),_:1}),o(C,{label:"描述"},{default:u((()=>[o(h,{modelValue:N.value.desc,"onUpdate:modelValue":a[3]||(a[3]=e=>N.value.desc=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(C,null,{default:u((()=>[o(oe,{type:"primary",icon:"search",onClick:Q},{default:u((()=>[i("查询")])),_:1}),o(oe,{icon:"refresh",onClick:P},{default:u((()=>[i("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),s("div",q,[s("div",S,[o(oe,{type:"primary",icon:"plus",onClick:te},{default:u((()=>[i("新增")])),_:1})]),o(re,{ref:"multipleTable",data:M.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:u((()=>[o(ue,{type:"selection",width:"55"}),o(ue,{align:"left",label:"日期",width:"180"},{default:u((e=>[i(r(d(D)(e.row.CreatedAt)),1)])),_:1}),o(ue,{align:"left",label:"字典名（中）",prop:"name",width:"160"}),o(ue,{align:"left",label:"字典名（英）",prop:"type",width:"120"}),o(ue,{align:"left",label:"状态",prop:"status",width:"120"},{default:u((e=>[i(r(d(E)(e.row.status)),1)])),_:1}),o(ue,{align:"left",label:"描述",prop:"desc",width:"280"}),o(ue,{align:"left",label:"按钮组"},{default:u((e=>[o(oe,{icon:"document",type:"primary",link:"",onClick:a=>{return l=e.row,void T.push({name:"dictionaryDetail",params:{id:l.ID}});var l}},{default:u((()=>[i("详情")])),_:2},1032,["onClick"]),o(oe,{icon:"edit",type:"primary",link:"",onClick:a=>(async e=>{const a=await V({ID:e.ID,status:e.status});$.value="update",0===a.code&&(W.value=a.data.resysDictionary,Z.value=!0)})(e.row)},{default:u((()=>[i("变更")])),_:2},1032,["onClick"]),o(ie,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:u((()=>[o(oe,{type:"primary",link:"",icon:"delete",style:{"margin-left":"10px"},onClick:a=>e.row.visible=!0},{default:u((()=>[i("删除")])),_:2},1032,["onClick"])])),default:u((()=>[A,s("div",B,[o(oe,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:u((()=>[i("取消")])),_:2},1032,["onClick"]),o(oe,{type:"primary",onClick:a=>(async e=>{e.visible=!1,0===(await k({ID:e.ID})).code&&(p({type:"success",message:"删除成功"}),1===M.value.length&&H.value>1&&H.value--,Y())})(e.row)},{default:u((()=>[i("确定")])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),s("div",O,[o(de,{"current-page":H.value,"page-size":L.value,"page-sizes":[10,30,50,100],total:K.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:X,onSizeChange:R},null,8,["current-page","page-size","total"])])]),o(ne,{modelValue:Z.value,"onUpdate:modelValue":a[8]||(a[8]=e=>Z.value=e),"before-close":ee,title:"弹窗操作"},{footer:u((()=>[s("div",F,[o(oe,{onClick:ee},{default:u((()=>[i("取 消")])),_:1}),o(oe,{type:"primary",onClick:le},{default:u((()=>[i("确 定")])),_:1})])])),default:u((()=>[o(se,{ref_key:"dialogForm",ref:ae,model:W.value,rules:G.value,"label-width":"110px"},{default:u((()=>[o(C,{label:"字典名（中）",prop:"name"},{default:u((()=>[o(h,{modelValue:W.value.name,"onUpdate:modelValue":a[4]||(a[4]=e=>W.value.name=e),placeholder:"请输入字典名（中）",clearable:"",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),o(C,{label:"字典名（英）",prop:"type"},{default:u((()=>[o(h,{modelValue:W.value.type,"onUpdate:modelValue":a[5]||(a[5]=e=>W.value.type=e),placeholder:"请输入字典名（英）",clearable:"",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),o(C,{label:"状态",prop:"status",required:""},{default:u((()=>[o(pe,{modelValue:W.value.status,"onUpdate:modelValue":a[6]||(a[6]=e=>W.value.status=e),"active-text":"开启","inactive-text":"停用"},null,8,["modelValue"])])),_:1}),o(C,{label:"描述",prop:"desc"},{default:u((()=>[o(h,{modelValue:W.value.desc,"onUpdate:modelValue":a[7]||(a[7]=e=>W.value.desc=e),placeholder:"请输入描述",clearable:"",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{T as default};
