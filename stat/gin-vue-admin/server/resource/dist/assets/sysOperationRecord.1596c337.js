/*! 
 Build based on gin-vue-admin 
 Time : 1680873134000 */
import{aJ as e,r as a,aA as l,o as t,c as o,d as r,e as i,w as s,h as d,a3 as u,J as p,a0 as n,j as c,b as m,E as f,av as v}from"./index.e22ca15e.js";import{E as g}from"./pagination.1c71de03.js";/* empty css              */import"./tag.46cc5c34.js";import"./select.96194a5d.js";import"./scrollbar.efc86474.js";/* empty css               */import{E as b,a as y}from"./table-column.a83e6cf2.js";import"./checkbox.bea932b2.js";/* empty css                *//* empty css             */import{E as h}from"./popover.16ea0d1a.js";import{E as w,a as j}from"./form-item.8c20599d.js";/* empty css               */import{f as _}from"./format.c2d47975.js";import{E as k}from"./index.e347d1a7.js";import"./isEqual.c0ca3f92.js";import"./_Uint8Array.ef0d212b.js";import"./index.21b03b03.js";import"./strings.36175d48.js";import"./_initCloneObject.671954bf.js";import"./dropdown.c097faf7.js";import"./date.23f5a973.js";import"./dictionary.e3d9631e.js";import"./sysDictionary.2b495a7f.js";const C={class:"gva-search-box"},V={class:"gva-table-box"},x={class:"gva-btn-list"},O=r("p",null,"确定要删除吗？",-1),S={style:{"text-align":"right","margin-top":"8px"}},E={class:"popover-box"},z={key:1},R={class:"popover-box"},U={key:1},I=r("p",null,"确定要删除吗？",-1),D={style:{"text-align":"right","margin-top":"8px"}},A={class:"gva-pagination"},J={name:"SysOperationRecord"},N=Object.assign(J,{setup(J){const N=a(1),q=a(0),B=a(10),L=a([]),P=a({}),T=()=>{P.value={}},F=()=>{N.value=1,B.value=10,""===P.value.status&&(P.value.status=null),K()},G=e=>{B.value=e,K()},H=e=>{N.value=e,K()},K=async()=>{const a=await(l={page:N.value,pageSize:B.value,...P.value},e({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:l}));var l;0===a.code&&(L.value=a.data.list,q.value=a.data.total,N.value=a.data.page,B.value=a.data.pageSize)};K();const M=a(!1),Q=a([]),W=e=>{Q.value=e},X=async()=>{const a=[];Q.value&&Q.value.forEach((e=>{a.push(e.ID)}));var l;0===(await(l={ids:a},e({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:l}))).code&&(c({type:"success",message:"删除成功"}),L.value.length===a.length&&N.value>1&&N.value--,M.value=!1,K())},Y=async a=>{a.visible=!1;var l;0===(await(l={ID:a.ID},e({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:l}))).code&&(c({type:"success",message:"删除成功"}),1===L.value.length&&N.value>1&&N.value--,K())},Z=e=>{try{return JSON.parse(e)}catch(a){return e}};return(e,a)=>{const c=m,J=w,K=f,$=j,ee=h,ae=b,le=k,te=l("warning"),oe=v,re=y,ie=g;return t(),o("div",null,[r("div",C,[i($,{inline:!0,model:P.value},{default:s((()=>[i(J,{label:"请求方法"},{default:s((()=>[i(c,{modelValue:P.value.method,"onUpdate:modelValue":a[0]||(a[0]=e=>P.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(J,{label:"请求路径"},{default:s((()=>[i(c,{modelValue:P.value.path,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(J,{label:"结果状态码"},{default:s((()=>[i(c,{modelValue:P.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>P.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(J,null,{default:s((()=>[i(K,{type:"primary",icon:"search",onClick:F},{default:s((()=>[d("查询")])),_:1}),i(K,{icon:"refresh",onClick:T},{default:s((()=>[d("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),r("div",V,[r("div",x,[i(ee,{modelValue:M.value,"onUpdate:modelValue":a[5]||(a[5]=e=>M.value=e),placement:"top",width:"160"},{reference:s((()=>[i(K,{icon:"delete",style:{"margin-left":"10px"},disabled:!Q.value.length,onClick:a[4]||(a[4]=e=>M.value=!0)},{default:s((()=>[d("删除")])),_:1},8,["disabled"])])),default:s((()=>[O,r("div",S,[i(K,{type:"primary",link:"",onClick:a[3]||(a[3]=e=>M.value=!1)},{default:s((()=>[d("取消")])),_:1}),i(K,{type:"primary",onClick:X},{default:s((()=>[d("确定")])),_:1})])])),_:1},8,["modelValue"])]),i(re,{ref:"multipleTable",data:L.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:W},{default:s((()=>[i(ae,{align:"left",type:"selection",width:"55"}),i(ae,{align:"left",label:"操作人",width:"140"},{default:s((e=>[r("div",null,u(e.row.user.userName)+"("+u(e.row.user.nickName)+")",1)])),_:1}),i(ae,{align:"left",label:"日期",width:"180"},{default:s((e=>[d(u(p(_)(e.row.CreatedAt)),1)])),_:1}),i(ae,{align:"left",label:"状态码",prop:"status",width:"120"},{default:s((e=>[r("div",null,[i(le,{type:"success"},{default:s((()=>[d(u(e.row.status),1)])),_:2},1024)])])),_:1}),i(ae,{align:"left",label:"请求IP",prop:"ip",width:"120"}),i(ae,{align:"left",label:"请求方法",prop:"method",width:"120"}),i(ae,{align:"left",label:"请求路径",prop:"path",width:"240"}),i(ae,{align:"left",label:"请求",prop:"path",width:"80"},{default:s((e=>[r("div",null,[e.row.body?(t(),n(ee,{key:0,placement:"left-start",trigger:"click"},{reference:s((()=>[i(oe,{style:{cursor:"pointer"}},{default:s((()=>[i(te)])),_:1})])),default:s((()=>[r("div",E,[r("pre",null,u(Z(e.row.body)),1)])])),_:2},1024)):(t(),o("span",z,"无"))])])),_:1}),i(ae,{align:"left",label:"响应",prop:"path",width:"80"},{default:s((e=>[r("div",null,[e.row.resp?(t(),n(ee,{key:0,placement:"left-start",trigger:"click"},{reference:s((()=>[i(oe,{style:{cursor:"pointer"}},{default:s((()=>[i(te)])),_:1})])),default:s((()=>[r("div",R,[r("pre",null,u(Z(e.row.resp)),1)])])),_:2},1024)):(t(),o("span",U,"无"))])])),_:1}),i(ae,{align:"left",label:"按钮组"},{default:s((e=>[i(ee,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:s((()=>[i(K,{icon:"delete",type:"primary",link:"",onClick:a=>e.row.visible=!0},{default:s((()=>[d("删除")])),_:2},1032,["onClick"])])),default:s((()=>[I,r("div",D,[i(K,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:s((()=>[d("取消")])),_:2},1032,["onClick"]),i(K,{type:"primary",onClick:a=>Y(e.row)},{default:s((()=>[d("确定")])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),r("div",A,[i(ie,{"current-page":N.value,"page-size":B.value,"page-sizes":[10,30,50,100],total:q.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:H,onSizeChange:G},null,8,["current-page","page-size","total"])])])])}}});export{N as default};
