/*! 
 Build based on gin-vue-admin 
 Time : 1680873134000 */
import{r as e,o as a,c as l,e as t,d as o,w as s,h as i,j as r,bm as p,E as d,b as c}from"./index.e22ca15e.js";import{E as u}from"./dialog.844a69bd.js";import"./overlay.b9869d98.js";import{E as m,a as n}from"./form-item.8c20599d.js";/* empty css              */import{E as f,a as b}from"./table-column.a83e6cf2.js";import"./checkbox.bea932b2.js";import"./tag.46cc5c34.js";/* empty css                *//* empty css               */import"./scrollbar.efc86474.js";/* empty css               */import{i as g,d as v,j as _}from"./autoCode.330570b9.js";import{W as j}from"./warningBar.d352a93c.js";import{_ as k}from"./_plugin-vue_export-helper.cdc0426e.js";import"./refs.e55ffb18.js";import"./_Uint8Array.ef0d212b.js";import"./_initCloneObject.671954bf.js";import"./index.21b03b03.js";import"./isEqual.c0ca3f92.js";/* empty css             *//* empty css                                                                   */const w={class:"gva-table-box"},y={class:"gva-btn-list"},h={class:"dialog-footer"},V={name:"AutoPkg"},x=k(Object.assign(V,{setup(k){const V=e({packageName:"",label:"",desc:""}),x=e({packageName:[{required:!0,message:"请输入包名",trigger:"blur"},{validator:(e,a,l)=>{/^\d+$/.test(a[0])?l(new Error("不能够以数字开头")):l()},trigger:"blur"}]}),C=e(!1),N=()=>{C.value=!1,V.value={packageName:"",label:"",desc:""}},B=e(null),E=async()=>{B.value.validate((async e=>{if(e){0===(await g(V.value)).code&&r({type:"success",message:"添加成功",showClose:!0}),T(),N()}}))},U=e([]),T=async()=>{const e=await v();0===e.code&&(U.value=e.data.pkgs)};return T(),(e,g)=>{const v=d,k=f,P=b,q=c,A=m,I=n,O=u;return a(),l("div",null,[t(j,{href:"https://www.bilibili.com/video/BV1kv4y1g7nT?p=3",title:"此功能为开发环境使用，不建议发布到生产，具体使用效果请看视频https://www.bilibili.com/video/BV1kv4y1g7nT?p=3"}),o("div",w,[o("div",y,[t(v,{type:"primary",icon:"plus",onClick:g[0]||(g[0]=e=>{C.value=!0})},{default:s((()=>[i("新增")])),_:1})]),t(P,{data:U.value},{default:s((()=>[t(k,{align:"left",label:"id",width:"60",prop:"ID"}),t(k,{align:"left",label:"包名",width:"150",prop:"packageName"}),t(k,{align:"left",label:"展示名",width:"150",prop:"label"}),t(k,{align:"left",label:"描述","min-width":"150",prop:"desc"}),t(k,{align:"left",label:"操作",width:"200"},{default:s((e=>[t(v,{icon:"delete",type:"primary",link:"",onClick:a=>(async e=>{p.confirm("此操作仅删除数据库中的pkg存储，后端相应目录结构请自行删除与数据库保持一致！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await _(e)).code&&(r({type:"success",message:"删除成功!"}),T())}))})(e.row)},{default:s((()=>[i("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),t(O,{modelValue:C.value,"onUpdate:modelValue":g[4]||(g[4]=e=>C.value=e),"before-close":N,title:"创建Package"},{footer:s((()=>[o("div",h,[t(v,{onClick:N},{default:s((()=>[i("取 消")])),_:1}),t(v,{type:"primary",onClick:E},{default:s((()=>[i("确 定")])),_:1})])])),default:s((()=>[t(j,{title:"新增Pkg用于自动化代码使用"}),t(I,{ref_key:"pkgForm",ref:B,model:V.value,rules:x.value,"label-width":"80px"},{default:s((()=>[t(A,{label:"包名",prop:"packageName"},{default:s((()=>[t(q,{modelValue:V.value.packageName,"onUpdate:modelValue":g[1]||(g[1]=e=>V.value.packageName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),t(A,{label:"展示名",prop:"label"},{default:s((()=>[t(q,{modelValue:V.value.label,"onUpdate:modelValue":g[2]||(g[2]=e=>V.value.label=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),t(A,{label:"描述",prop:"desc"},{default:s((()=>[t(q,{modelValue:V.value.desc,"onUpdate:modelValue":g[3]||(g[3]=e=>V.value.desc=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-881ef95f"]]);export{x as default};
