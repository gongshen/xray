/*! 
 Build based on gin-vue-admin 
 Time : 1680873134000 */
import{r as e,a,o as l,c as t,d as o,e as r,w as i,h as d,aE as s,a3 as u,J as p,bm as n,j as m,b as c,E as v}from"./index.e22ca15e.js";import{E as f}from"./dialog.844a69bd.js";import"./overlay.b9869d98.js";import{E as b}from"./pagination.1c71de03.js";/* empty css              */import"./tag.46cc5c34.js";import"./select.96194a5d.js";import"./scrollbar.efc86474.js";/* empty css               */import{E as _,a as g}from"./table-column.a83e6cf2.js";import"./checkbox.bea932b2.js";/* empty css                */import{E as y}from"./popover.16ea0d1a.js";import{E as j,a as h}from"./form-item.8c20599d.js";/* empty css               */import{E as k}from"./date-picker.6d698148.js";import{a as w,d as V,b as C,c as x,u as U}from"./server.e76a9063.js";import{f as E}from"./format.c2d47975.js";/* empty css                 */import"./previewCodeDialg.vue_vue_type_style_index_0_lang.4ea76fa7.js";/* empty css                      *//* empty css             *//* empty css               *//* empty css                                                                   *//* empty css                                                                    */import"./dictionary.e3d9631e.js";/* empty css                                                              */import"./refs.e55ffb18.js";import"./isEqual.c0ca3f92.js";import"./_Uint8Array.ef0d212b.js";import"./index.21b03b03.js";import"./index.e347d1a7.js";import"./strings.36175d48.js";import"./_initCloneObject.671954bf.js";import"./dropdown.c097faf7.js";import"./arrays.378bf91a.js";import"./index.71bebd1b.js";import"./date.23f5a973.js";import"./sysDictionary.2b495a7f.js";const D={class:"gva-search-box"},z={class:"gva-table-box"},A={class:"gva-btn-list"},S=o("p",null,"确定要删除吗？",-1),I={style:{"text-align":"right","margin-top":"8px"}},q={class:"gva-pagination"},B={class:"dialog-footer"},O={name:"Server"},T=Object.assign(O,{setup(O){const T=e({ip:"",port:80,remark:"",reset_date:""}),F=a({ip:[{required:!0,message:"请输入服务器IP",trigger:"blur"}],port:[{required:!0,message:"请输入端口号",trigger:"blur"}],reset_date:[{required:!0,message:"请输入重置时间",trigger:"blur"}]}),J=e(),K=e(1),R=e(0),M=e(10),N=e([]),P=e({}),G=e({content:""}),H=()=>{P.value={},X()},L=()=>{K.value=1,M.value=10,X()},Q=e=>{M.value=e,X()},W=e=>{K.value=e,X()},X=async()=>{const e=await w({page:K.value,pageSize:M.value,...P.value});0===e.code&&(N.value=e.data.list,R.value=e.data.total,K.value=e.data.page,M.value=e.data.pageSize)};X();(async()=>{})();const Y=e([]),Z=e=>{Y.value=e},$=e(!1),ee=async()=>{const e=[];if(0===Y.value.length)return void m({type:"warning",message:"请选择要删除的数据"});Y.value&&Y.value.map((a=>{e.push(a.ID)}));0===(await V({ids:e})).code&&(m({type:"success",message:"删除成功"}),N.value.length===e.length&&K.value>1&&K.value--,$.value=!1,X())},ae=e(""),le=e(!1),te=()=>{le.value=!1},oe=async e=>{0===(await C({ID:e.ID})).code&&(m({type:"success",message:"删除成功"}),1===N.value.length&&K.value>1&&K.value--,X())},re=e(!1),ie=()=>{ae.value="create",re.value=!0},de=()=>{re.value=!1,T.value={ip:"",port:0,remark:""}},se=async()=>{var e;null==(e=J.value)||e.validate((async e=>{if(!e)return;let a;switch(ae.value){case"create":default:a=await x(T.value);break;case"update":a=await U(T.value)}0===a.code&&(m({type:"success",message:"创建/更改成功"}),de(),X())}))};return(e,a)=>{const m=k,w=j,V=c,C=v,x=h,U=y,O=_,X=g,ae=b,ue=f;return l(),t("div",null,[o("div",D,[r(x,{inline:!0,model:P.value,class:"demo-form-inline",onKeyup:s(L,["enter"])},{default:i((()=>[r(w,{label:"创建时间"},{default:i((()=>[r(m,{modelValue:P.value.startCreatedAt,"onUpdate:modelValue":a[0]||(a[0]=e=>P.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),r(m,{modelValue:P.value.endCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),r(w,{label:"服务器ip"},{default:i((()=>[r(V,{modelValue:P.value.ip,"onUpdate:modelValue":a[2]||(a[2]=e=>P.value.ip=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),r(w,null,{default:i((()=>[r(C,{type:"primary",icon:"search",onClick:L},{default:i((()=>[d("查询")])),_:1}),r(C,{icon:"refresh",onClick:H},{default:i((()=>[d("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),o("div",z,[o("div",A,[r(C,{type:"primary",icon:"plus",onClick:ie},{default:i((()=>[d("新增")])),_:1}),r(U,{visible:$.value,"onUpdate:visible":a[5]||(a[5]=e=>$.value=e),placement:"top",width:"160"},{reference:i((()=>[r(C,{icon:"delete",style:{"margin-left":"10px"},disabled:!Y.value.length,onClick:a[4]||(a[4]=e=>$.value=!0)},{default:i((()=>[d("删除")])),_:1},8,["disabled"])])),default:i((()=>[S,o("div",I,[r(C,{type:"primary",link:"",onClick:a[3]||(a[3]=e=>$.value=!1)},{default:i((()=>[d("取消")])),_:1}),r(C,{type:"primary",onClick:ee},{default:i((()=>[d("确定")])),_:1})])])),_:1},8,["visible"])]),r(X,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:N.value,"row-key":"ID",onSelectionChange:Z},{default:i((()=>[r(O,{type:"selection",width:"55"}),r(O,{align:"left",label:"服务器ip",prop:"ip",width:"150"}),r(O,{align:"left",label:"端口",prop:"port",width:"60"}),r(O,{align:"left",label:"备注",prop:"remark",width:"120"}),r(O,{align:"left",label:"重置日",width:"180"},{default:i((e=>[d(u(p(E)(e.row.reset_date)),1)])),_:1}),r(O,{align:"left",label:"创建日期",width:"180"},{default:i((e=>[d(u(p(E)(e.row.CreatedAt)),1)])),_:1}),r(O,{align:"left",label:"按钮组"},{default:i((e=>[r(C,{type:"primary",link:"",icon:"document",class:"table-button",onClick:a=>(async e=>{G.value.content=JSON.stringify(e.config,null,2),le.value=!0})(e.row)},{default:i((()=>[d("查看配置")])),_:2},1032,["onClick"]),r(C,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void n.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{oe(l)}));var l}},{default:i((()=>[d("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",q,[r(ae,{layout:"total, sizes, prev, pager, next, jumper","current-page":K.value,"page-size":M.value,"page-sizes":[10,30,50,100],total:R.value,onCurrentChange:W,onSizeChange:Q},null,8,["current-page","page-size","total"])])]),r(ue,{modelValue:le.value,"onUpdate:modelValue":a[6]||(a[6]=e=>le.value=e),"before-close":te,title:"配置信息"},{default:i((()=>[r(x,{model:G.value,"label-position":"right",ref_key:"elFormRef",ref:J,rules:F,"label-width":"80px"},{default:i((()=>[o("pre",null,u(G.value.content),1)])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),r(ue,{modelValue:re.value,"onUpdate:modelValue":a[11]||(a[11]=e=>re.value=e),"before-close":de,title:"弹窗操作"},{footer:i((()=>[o("div",B,[r(C,{onClick:de},{default:i((()=>[d("取 消")])),_:1}),r(C,{type:"primary",onClick:se},{default:i((()=>[d("确 定")])),_:1})])])),default:i((()=>[r(x,{model:T.value,"label-position":"right",ref_key:"elFormRef",ref:J,rules:F,"label-width":"80px"},{default:i((()=>[r(w,{label:"服务器ip:",prop:"ip"},{default:i((()=>[r(V,{modelValue:T.value.ip,"onUpdate:modelValue":a[7]||(a[7]=e=>T.value.ip=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(w,{label:"端口:",prop:"port"},{default:i((()=>[r(V,{modelValue:T.value.port,"onUpdate:modelValue":a[8]||(a[8]=e=>T.value.port=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(w,{label:"备注:",prop:"remark"},{default:i((()=>[r(V,{modelValue:T.value.remark,"onUpdate:modelValue":a[9]||(a[9]=e=>T.value.remark=e),clearable:!1,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(w,{label:"重置时间:",prop:"resetDate"},{default:i((()=>[r(m,{modelValue:T.value.reset_date,"onUpdate:modelValue":a[10]||(a[10]=e=>T.value.reset_date=e),type:"datetime",clearable:!1,placeholder:"重置时间"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{T as default};
